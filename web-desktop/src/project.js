window.__require=function t(e,i,n){function o(c,h){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var r="function"==typeof __require&&__require;if(!h&&r)return r(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){return o(e[c][1][t]||t)},l,l.exports,t,e,i,n)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<n.length;c++)o(n[c]);return o}({Bg:[function(t,e,i){"use strict";cc._RF.push(e,"edddbZ6+WZC+IeYWy7R2bWy","Bg"),cc.Class({extends:cc.Component,properties:{bg1:{default:null,type:cc.Node},bg2:{default:null,type:cc.Node}},start:function(){this.day=!0;var t=cc.winSize.height,e=1196*t/643;this.bg1.width=e,this.bg1.height=t;var i=cc.v2(0,0),n=this.node.convertToNodeSpaceAR(i);this.bg1.position=n,this.bg2.width=e,this.bg2.height=t,this.bg2.x=n.x+e,this.bg2.y=n.y,this.move=!0},dayMode:function(){0==this.day&&(this.day=!0,this.bg1.getComponent(cc.Animation).play("NightToDay"),this.bg2.getComponent(cc.Animation).play("NightToDay"))},nightMode:function(){1==this.day&&(this.day=!1,this.bg1.getComponent(cc.Animation).play("DayToNight"),this.bg2.getComponent(cc.Animation).play("DayToNight"))},stop:function(){this.move=!1},update:function(t){if(0!=this.move){this.bg1.x-=4,this.bg2.x-=4,this.node.convertToWorldSpaceAR(this.bg1.position).x+this.bg1.width<0&&(this.bg1.x=this.bg2.x+this.bg2.width),this.node.convertToWorldSpaceAR(this.bg2.position).x+this.bg2.width<0&&(this.bg2.x=this.bg1.x+this.bg1.width)}}}),cc._RF.pop()},{}],Enemy:[function(t,e,i){"use strict";cc._RF.push(e,"018d8tboBlBA4xwmQoMGgVE","Enemy"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.currentX=0},start:function(){},onCollisionEnter:function(t,e){},onCollisionExit:function(t,e){},out:function(){var t=new cc.Event.EventCustom("enemyOut",!0);t.detail=this.node,this.node.dispatchEvent(t)},unuse:function(){},reuse:function(){},update:function(t){this.currentX!=this.node.x?(this.currentX,this.node.x,this.node.active&&this.node.parent.convertToWorldSpaceAR(this.node.position).x<=this.node.width/2&&this.out()):this.out()}}),cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"37b532cboFN4INP36fKH5uo","Game"),cc.Class({extends:cc.Component,properties:{bg:{default:null,type:cc.Node},ground:{default:null,type:cc.Node},player:{default:null,type:cc.Node},enemy:{default:null,type:cc.Prefab},bgmAudio:{default:null,type:cc.AudioClip},scoreL:{default:null,type:cc.Label},oneDaySeconds:0,menuNode:{default:null,type:cc.Node},menuPlayBtn:{default:null,type:cc.Node},replayNode:{default:null,type:cc.Node},replayL:{default:null,type:cc.Label},replayBtn:{default:null,type:cc.Node}},onLoad:function(){this.gameOver=!1,this.time=0,this.day=0,cc.director.getCollisionManager().enabled=!0,this.enumyNum=0,this.g=980,this.falling=!1,this.fallingSpeed=0,this.mode=0;var t=this.player.getComponent("Player");this.bg.on(cc.Node.EventType.TOUCH_START,function(){switch(this.mode){case 0:this.falling=!1,this.fallingSpeed=0,this.mode=1,this.player.stopAllActions();var e=cc.moveBy(t.firstJumpDuration,0,t.firstJumpHeight).easing(cc.easeCubicActionOut()),i=cc.callFunc(function(){this.falling=!0},this),n=cc.sequence(e,i);this.player.runAction(n),this.player.getComponent(cc.Animation).play("playerJum");break;case 1:this.falling=!1,this.fallingSpeed=0,this.mode=2,this.player.stopAllActions();e=cc.moveBy(t.secondJumpDuration,0,t.secondJumpHeight).easing(cc.easeCubicActionOut()),i=cc.callFunc(function(){this.falling=!0},this),n=cc.sequence(e,i);this.player.runAction(n);break;case 2:this.player.stopAllActions(),this.fallingSpeed+=1e3,this.mode=3,this.falling=!0}},this),this.replayBtn.on(cc.Node.EventType.TOUCH_START,this.replay,this),this.menuPlayBtn.on(cc.Node.EventType.TOUCH_START,this.replay,this),0==Global.playCount&&(this.player.destroy(),this.menuNode.active=!0)},start:function(){cc.audioEngine.playMusic(this.bgmAudio,!0),this.player.x=-this.node.width/2+45+this.player.width/2,this.enymyPool=new cc.NodePool;for(var t=0;t<4;t++){var e=cc.instantiate(this.enemy);this.enymyPool.put(e)}this.generateEnemy(!0),this.bgComponent=this.bg.getComponent("Bg"),this.groundComponent=this.ground.getComponent("Ground"),this.node.on("enemyOut",function(t){this.enemyOut(t)},this),this.node.on("playerHurt",function(t){this.playerHurt(t)},this)},enemyOut:function(t){this.enumyNum--;var e=t.detail;1==e.getComponent("Enemy").random&&this.generateEnemy(!0),e.removeFromParent(),e.stopAllActions(),this.enymyPool.put(e)},playerHurt:function(t){this.player.destroy(),this.gameOver=!0,this.bg.targetOff(this),this.replayNode.active=!0},replay:function(){Global.playCount++,cc.director.loadScene("Game")},generateEnemy:function(t){if(0!=Global.playCount&&!this.gameOver){var e=0,i=0;this.day<30?(e=1,i=this.day):(e=2,i=this.day-30),(i=5-i)<0&&(i=1);Math.ceil(Math.random()*i);if(1==i&&e++,!(this.enumyNum>=e)){var n=null;(n=this.enymyPool.size()>0?this.enymyPool.get():cc.instantiate(this.enemy)).getComponent("Enemy").random=t,this.bg.addChild(n),this.enumyNum++;var o=this.player.getComponent("Player"),s=this.node.width,c=this.player.height,h=this.ground.height+50+(o.firstJumpHeight+o.secondJumpHeight-c)*Math.random(),a=cc.v2(s,h),r=n.parent.convertToNodeSpaceAR(a);n.position=r;var l=n.getComponent(cc.Animation),u=Math.ceil(4*Math.random()),d="EnemyTransform"+u;switch(l.play(d),n.scaleX=1,n.scaleY=1,n.angle=0,n.opacity=255,n.color=cc.Color.WHITE,u=Math.ceil(4*Math.random())){case 1:this.aimAction(t,n,this.player.position,n.position);break;case 2:this.bezierAction(t,n,n.position,this.ground.height,this.ground.height+o.firstJumpHeight+o.secondJumpHeight);break;case 3:this.jumpAction(t,n,h-this.ground.height);break;case 4:this.flyAction(t,n)}}}},randomGenerate:function(t){Math.random()>.5&&this.schedule(function(){this.generateEnemy(!1)},t/3*2)},aimAction:function(t,e,i,n){var o=n.x-i.x,s=n.y-i.y,c=-this.node.width-e.width,h=s/o*c,a=cc.moveBy(1.5,c,h);e.runAction(a),t&&this.randomGenerate(1.5)},bezierAction:function(t,e,i,n,o){e.convertToWorldSpaceAR(i);var s=cc.v2(-e.width+e.width,n+(o-n)*Math.random()),c=e.parent.convertToNodeSpaceAR(s),h=cc.v2(this.node.width/4*3,n-50),a=e.parent.convertToNodeSpaceAR(h),r=cc.v2(this.node.width/4,o+50),l=[e.parent.convertToNodeSpaceAR(r),a,c],u=(Math.ceil(2*Math.random()),cc.bezierTo(3,l));e.runAction(u),t&&this.randomGenerate(3)},jumpAction:function(t,e,i){var n=-this.node.width-e.width,o=cc.moveBy(3,n,0);e.runAction(o);var s=cc.moveBy(.5,0,-i).easing(cc.easeCubicActionIn()),c=cc.moveBy(.5,0,i).easing(cc.easeCubicActionOut()),h=cc.sequence(s,c),a=cc.repeatForever(h);e.runAction(a),t&&this.randomGenerate(3)},flyAction:function(t,e){var i=-this.node.width-e.width,n=cc.moveBy(3,i,0);e.runAction(n),t&&this.randomGenerate(3)},stop:function(){this.move=!1},update:function(t){if(this.gameOver)return this.bgComponent.stop(),this.bgComponent.nightMode(),void this.groundComponent.stop();(this.setThisTime(this.time+t),0!=this.falling)&&(this.fallingSpeed+=this.g*t,this.player.y-=this.fallingSpeed*t,this.player.y-this.ground.y<this.player.height/2+this.ground.height/2&&(this.player.y=this.player.height/2+this.ground.height/2+this.ground.y,this.falling=!1,this.fallingSpeed=0,this.mode=0,this.player.getComponent(cc.Animation).play("playerRun")))},setThisTime:function(t){var e=Math.floor(this.time),i=Math.floor(t);(this.time=t,e!=i)&&(i%this.oneDaySeconds>this.oneDaySeconds/2?this.bgComponent.nightMode():this.bgComponent.dayMode(),this.setThisDay(Math.floor(i/this.oneDaySeconds)))},setThisDay:function(t){this.day!=t&&(this.day=t,this.scoreL.string="\u5df2\u5ea6\u8fc7"+this.day+"\u5929",this.replayL.string="\u672c\u5c40\u5171\u5ea6\u8fc7"+this.day+"\u5929")}}),cc._RF.pop()},{}],Global:[function(t,e,i){"use strict";cc._RF.push(e,"f1475bhvlxIjZhj7LHNN1Kg","Global"),window.Global={playCount:0},cc._RF.pop()},{}],Ground:[function(t,e,i){"use strict";cc._RF.push(e,"36c8fLgjutKa41DHEPn2aNU","Ground"),cc.Class({extends:cc.Component,properties:{bg1:{default:null,type:cc.Node},bg2:{default:null,type:cc.Node}},start:function(){var t=this.node.height,e=755*t/140;this.bg1.anchorX=0,this.bg1.anchorY=0,this.bg2.anchorX=0,this.bg2.anchorY=0,this.bg1.width=e,this.bg1.height=t;var i=cc.v2(0,0),n=this.node.convertToNodeSpaceAR(i);this.bg1.position=n,this.bg2.width=e,this.bg2.height=t,this.bg2.x=n.x+e,this.bg2.y=n.y,this.move=!0},stop:function(){this.move=!1},update:function(t){if(0!=this.move){this.bg1.x-=4,this.bg2.x-=4,this.node.convertToWorldSpaceAR(this.bg1.position).x+this.bg1.width<0&&(this.bg1.x=this.bg2.x+this.bg2.width),this.node.convertToWorldSpaceAR(this.bg2.position).x+this.bg2.width<0&&(this.bg2.x=this.bg1.x+this.bg1.width)}}}),cc._RF.pop()},{}],Player:[function(t,e,i){"use strict";cc._RF.push(e,"a53eaMLExJPTJyrodEkNrvP","Player"),cc.Class({extends:cc.Component,properties:{firstJumpHeight:0,firstJumpDuration:0,secondJumpHeight:0,secondJumpDuration:0,fallDuration:0,hurtAudio:{default:null,type:cc.AudioClip}},start:function(){var t=cc.moveBy(1,0,600).easing(cc.easeCubicActionOut()),e=cc.moveBy(1,0,-600).easing(cc.easeCubicActionIn()),i=cc.sequence(t,e);cc.repeatForever(i);this.node.getComponent(cc.Animation).play("playerRun")},update:function(t){},onCollisionEnter:function(t,e){cc.audioEngine.playEffect(this.hurtAudio,!1),this.node.color=cc.Color.RED,this.node.stopAllActions();var i=new cc.Event.EventCustom("playerHurt",!0);this.node.dispatchEvent(i)},onCollisionExit:function(t,e){this.node.color=cc.Color.WHITE}}),cc._RF.pop()},{}]},{},["Bg","Enemy","Game","Global","Ground","Player"]);